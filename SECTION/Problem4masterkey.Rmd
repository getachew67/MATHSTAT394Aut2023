---
title: "Problem Section 4"
subtitle:  "Mon Oct 23, 2023"
graphics: yes
output: 
        pdf_document
header-includes:
    - \usepackage{amsmath, amssymb}
    - \usepackage{framed}\definecolor{shadecolor}{rgb}{0.949,0.949,0.949}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

* * * 
\begin{shaded}

\textbf{Learning Outcomes}

The problems are designed to build conceptual understanding and problem-solving skills. The emphasis is on learning to find, evaluate and build confidence.
The specific tasks include: 

   - Identify whether the conditions for a binomial experiment are satisfied.
     
   - Calculate binomial probabilities
   
   - Calculate expected value
  
   - Back up and support work with relevant explanations


\end{shaded}


* * *

### Exercises 

1. A multiple choice test has 20 questions, each with four answers. 
Suppose a student randomly guesses the answer to each question. Let the random variable $X$ denote the number of questions they guess correctly. 
  
  a. What is the distribution of $X$? State the name of the distribution and also the values of its parameters. Be sure to state (in context) any assumptions you need to make.
  
This experiment is binomial because
\begin{itemize}
  \item There are a finite number of trials (20 questions)
  \item The probability of a correct answer is the same for each trial (4 answers for each question)
  \item There are two outcomes for each trial (right or wrong)
  \item Each trial is independent (i.e. you have the same chance of getting a question right no matter your previous answers)
\end{itemize}
Under the assumptions of the binomial experiment, the random variable $X$ will have a $X \sim \text{Binomial}(n = 20, \pi = \frac{1}{4})$.
  
  b. Give an expression for the probability that they will correctly guess 12 questions. Then write the R function for calculating this probability. 
  
We are looking for the value $P(X=12) = \binom{20}{12} (0.25)^{12} \left(1- 0.25\right)^{20-12}$. Now we evaluate this numerically in R:
```{r p_X_12}
dbinom(12, 20, 1/4)
```

  
  c. How many questions should they *expect* to guess correctly?

Since we know $X \sim \text{Binom}(20, 1/4)$, then the expected value of the random variable is
$$E[X] = n \cdot \pi = 20 \cdot \frac{1}{4} = 5$$. So the student should expect to guess five questions correctly.
  
  d. Give an expression for the probability that they will correctly guess fewer questions than expected. Then write the R function for calculating this probability. 
  
Here we want to calucate 
$$\sum_{i=0}^4 P(X=i) = \sum_{i=0}^4 \binom{20}{i}(0.25)^i(1-0.25)^{20-i}$$
We calculate this probability in R using the `pbinom` function:
```{r p_x_leq_5}
pbinom(4, 20, 1/4)
```
 

2. A box contains n chips numbered 1 through n. Let $X$ denote the number on a randomly selected chip from the box. Assume that the PMF of $X$ is given by
$$f(x) = P(X = x) = k \cdot x, \ \ \ x = 1,2,\dots,n$$
where $k$ is some unknown number. 

a. What is $k$?  

   Hints: The probabilities must sum to 1. Also the sum of the first $n$ integers is $n(n+1)/2$
   
We know that for any probability distribution, the probabilities must sum to 1. Thus, we can write:
\begin{align*}
  \sum_x f(x) &= 1 \\
  \sum_{x=1}^n k \cdot x &= 1 \\
  k \cdot \frac{n(n+1)}{2} &= 1 \\
  k &= \frac{2}{n(n+1)}
\end{align*}

b. Find $E\left[X \right]$, the expected value of $X$. 

   Hint: you will need to use the fact that the sum of the squares of the first $n$ integers is $n(n+1)(2n+1)/6$ in order to simplify the expression.
   
We can calculate $E[X]$ directly:
\begin{align*}
  E[X] &= \sum_{x=1}^n x \cdot f(x)\\
       &= \sum_{x=1}^n x \cdot (kx) \\
       &= \sum_{x=1}^n x^2 \cdot k \\
       &= k \cdot \frac{n(n+1)(2n+1)}{6}  \tag*{sum of squares for first $n$ integers} \\
       &= \frac{2}{n(n+1)} \cdot \frac{n(n+1)(2n+1)}{6}  \tag*{plug in $k$ from part (a)} \\
       &= \frac{2n+1}{3}
\end{align*}


3. Weird Wally offers you the following choice. You may have a flat amount of $\frac{1}{3.5}$ dollars or you may roll a fair die and he will give you $\frac{1}{X}$ dollars where $X$ is the value on the roll. 
The PMF of $X$ is shown in the table below.

\begin{tabular}{c|c|c|c|c|c|c} \hline
$x$ & 1& 2 & 3 &4 & 5& 6 \\ \hline
$f(x)$& $\frac{1}{6}$ & $\frac{1}{6}$ & $\frac{1}{6}$ &$\frac{1}{6}$ &$\frac{1}{6}$ &$\frac{1}{6}$ \\ \hline
\end{tabular}

Which is the better deal? Calculate $E\left[ \frac{1}{X} \right]$ to decide.  (Hint: use the law of the unconscious probabilist - Lemma 7.3)

We will calculate $E[1/X]$ to determine which is the better deal. We want to use the law of the unconscious probabilist to solve this problem where the function applied to $X$ is $f(x) = \frac{1}{x}$. We write:
\begin{align*}
  E\left[\frac{1}{X}\right] &= E[f(X)] \\
                 &= \sum_{x=1}^6 f(x) \cdot P(X=x) \\
                 &= \sum_{x=1}^6 \frac{P(X=x)}{x} \\
                 &= \sum_{x=1}^6 \frac{1}{6\cdot x} \\
                 &= \frac{1}{6} \cdot \sum_{x=1}^6 \frac{1}{x}
\end{align*}

We now use R to calculate this value:
```{r e_x}
inv_x <- 1/(1:6)
E_X <- sum(inv_x) / 6
print(paste0("The expectation of 1/X is ", round(E_X, 4)))
```

Using R we see that the expected value of our payout with the die-rolling method is \$`r round(E_X, 4)`, whereas Weird Wally offered us \$`r round(1/3.5, 4)` initially. Thus, rolling the die has a better expected value compared to Wally's offer.

